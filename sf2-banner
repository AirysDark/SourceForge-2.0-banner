#!/usr/bin/env bash
set -euo pipefail

C_RESET="\e[0m"; C_BOLD="\e[1m"; C_DIM="\e[2m"
C_BLUE="\e[38;5;33m"; C_WHITE="\e[97m"

line(){ printf '%s\n' "$(printf 'â”€%.0s' {1..80})"; }

header(){
  local now=$(date '+%H:%M - %a %d/%m/%y')
  line
  printf "${C_BOLD}${C_WHITE} SourceForge 2.0 Banner : %s${C_RESET}\n" "$now"
  line
}

print_item(){ printf "${C_WHITE}- %s: %s${C_RESET}\n" "$1" "$2"; }

print_cmd(){ printf "${C_WHITE} %-20s : %s${C_RESET}\n" "$1" "$2"; }

header

print_item "Hostname" "$(hostname)"
print_item "Uptime" "$(uptime -p)"
print_item "LAN IP" "$(hostname -I | awk '{print $1}')"
print_item "Load" "$(awk '{print $1, $2, $3}' /proc/loadavg)"
ram=$(free -m | awk '/Mem/{printf "%dMi / %dMi (%.0f%%)", $3, $2, $3/$2*100}')
print_item "RAM" "$ram"
disk=$(df -h --output=used,size,pcent / | awk 'NR==2{print $1 " / " $2 " (" $3 ")"}')
print_item "Disk" "$disk"

line
echo
print_cmd "sf2-config" "Toggle banner plugins"
print_cmd "sf2-software" "Service/DB/DDNS/HTTPS menu"
print_cmd "sf2-banner --update" "Refresh banner + plugins"
print_cmd "htop" "Resource monitor"
print_cmd "cpu" "CPU info & stats"
line
